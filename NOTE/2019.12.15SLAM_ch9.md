# SLAM14讲 后端1

## 贝叶斯公式

贝叶斯公式最简单表述形式如下
$$
\begin{aligned}
    P(A \mid B) = \frac{P(A \Cap B)}{P(B)} \\
    P(A \mid B) P(B) = P(A \Cap B) = P(B \mid A) P(A) \\
    P(B \mid A) = \frac{P(A \mid B) P(B)}{P(A)}
    \tag{9.1}
\end{aligned}
$$
利用此公式可推广多条件情况
$$
P(A \mid B,C) = \frac{P(A)P(B \mid A) P(C \mid A ,b)}{P(C \mid B) P(B)}
\tag{9.2}
$$
多条件情况有多种表述方式

## 高斯分布定义

### 一维标准高斯分布

$$
P(x) = \frac{1}{\sqrt{2 \pi}} \exp (-\frac{x^2}{2})
$$

### 一维一般高斯分布

引入线性变换 $x:=A(x−μ),\:\sigma = 1/A$
$$
P(x) = \frac{1}{\sigma \sqrt{2 \pi}} \exp (-\frac{(x-\mu)^2}{2\sigma^2})
$$

### 二维高斯分布(各变量独立)

$P(x,y) = P(x) P(y)$ 定义 $\overrightarrow{v} = [x,y]^T$, 有:
$$
P(\overrightarrow{v}) = \frac{1}{2\pi} \exp(-\frac{1}{2}) \overrightarrow{v^T} \overrightarrow{v}
$$
令 $\overrightarrow{v} = A(\overrightarrow{x} - \mu)$ 得到一般形式
$$
P(\overrightarrow{v}) = \frac{A}{2 \pi} \exp(-\frac{1}{2}(x-\mu)^T A^T A (x-\mu))
$$
其中，定义 协方差矩阵 $\Sigma = A^T A$

### 高维高斯分布

$$
P(v) = \frac{1}{(2\pi)^{\frac{n}{2}} \mid \Sigma \mid^\frac{1}{2}} \exp(-\frac{1}{2} (v-\mu)^T \Sigma^{-1} (v-\mu))\:\: \overrightarrow{v} \in R^n
$$

## 协方差矩阵

方差用来度量随机变量的离散程度
协方差用来刻画两个随机变量相似程度

### 方差

$$
\sigma^2_x = \frac{1}{n-1} \sum^n_{i=1} (x_i-\overline{x})^2
$$

### 协方差定义

$$
\sigma(x,y) = \frac{1}{n-1} \sum^n_{i=1} (x_i - \overline{x})(y_i - \overline{y})
$$

如上，方差可以视为随机变量关于其自身的协方差

### 协方差矩阵引出

对于给定 $d$ 个随机变量 $x_k,k = 1,2...,d$, 这些随机变量方差为
$$
\sigma(x_k,x_k) = \frac{1}{n-1} \sum^n_{i=1} (x_{ki}-\overline{x}_k)^2\: \: k = 1,2,...,d
$$
而两两之间的协方差为
$$
\sigma(x_m,x_k) = \frac{1}{n-1} \sum^n_{i=1} (x_{mi} - \overline{x}_m)(x_{ki} - \overline{x}_k)
$$
从而得到协方差矩阵
$$
\Sigma = \left[
    \begin{matrix}
        \sigma(x_1,x_1) & \cdots & \sigma(x_1,x_d) \\
        \vdots & \ddots & \vdots \\
        \sigma(x_d,x_1) & \cdots & \sigma(x_d,x_d)
    \end{matrix}
    \right] \in R^{d \times d}
$$
<font color = #FF6197 size = 3>显然,协方差矩阵 $\Sigma$ 为对称矩阵,其大小为 $d\times d$ </font>

### 多元正态分布于线性变换

对于各个变量以零为均值的标准正态分布
$$
P(v) = \frac{1}{(2\pi)^{\frac{n}{2}} \mid \Sigma \mid^\frac{1}{2}} \exp(-\frac{1}{2} v^T \Sigma^{-1} v)\:\: \overrightarrow{v} \in R^n
$$
随机生成若干个点,每个点似然为
$$
\mathcal{L} (v) \propto \exp(-\frac{1}{2} v^T v)
$$
,随后对所有点做线性变换
$$
t = A v
$$
其中 $A$ 被称为变换矩阵,它由两个矩阵构成  
尺度矩阵
$$
\left[
\begin{matrix}
    s_y & 0 \\
    0 & s_z
\end{matrix}
\right]
$$
旋转矩阵
$$
\left[
\begin{matrix}
    \cos(\theta) & -\sin(\theta) \\
    \sin(\theta) & \cos(\theta)
\end{matrix}
\right]
$$
其中 $\theta$ 为顺时针旋转的度数 且 $A = RS$  
将$t = A v$ 带入前面给出的似然 ,有
$$
\mathcal{L} (t) \propto \exp(-\frac{1}{2} (A v)^T (A v) ) = \exp(-\frac{1}{2}  t^T (A^T A) t)
$$
由此可以得到,多元正态分布的协方差矩阵为
$$
\Sigma = A^T A
$$
